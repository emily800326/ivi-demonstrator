<% actions.forEach(function(aAction) { %>

    <fieldset>
      <legend><%= aAction.title %></legend>
      <% if(aAction.type == "event") { %>
        <div id="<%= aAction.message %>Event">
          If API endpoint is defined this needs to be implemented manually
        </div>

          <% if (!!aAction.addStatusListener) { %>
          <script type="text/javascript">
          $(function() {                  
              if (!!window.EventSource) {
                var source = new EventSource('<%= basePath %><%= aAction.endpoint %>');    

                source.addEventListener('<%= aAction.message %>', function(e) {
                  console.log("status:" + e.data);
                  $("#<%= aAction.message %>Event").text(e.data);
                  return true;
                }, false);      

              } else {
                document.write("EventSource is not supported.");
              }
            });

          </script>

          <% } %>

      <% } %>
      <% if(aAction.type == "get" || aAction.type == "navigate") { %>
        
        <% if(aAction.parameters == undefined) { %>
        	<a href="<%= basePath %><%= aAction.endpoint %>">Invoke</a>
      	<% } else {%>
        <form method="get" action="<%= basePath %><%= aAction.endpoint %>" enctype="application/x-www-form-urlencoded">
            <% aAction.parameters.forEach(function(aParameter) { %>
              <b><%= aParameter.name %>: </b>
              <input type="textbox" size="64" name="<%= aParameter.name %>" value="<%= aParameter.value %>">
              <% if (aParameter.type == "select") { %>
              <br /><i><%= aParameter.name %> options: </i>
                 {
                 <% aParameter.values.forEach(function(aOption) { %>
                  "<%= aOption.id %>" (<%= aOption.title %>), 
                  <% }); %>
                  }
              <% } %>

              <% if (aParameter.type == "checkbox") { %>
              <br /><i><%= aParameter.name %> options: true, false</i>
              <% } %>
              <br />
            <% }); %>
            <input type="submit" value="submit">
        </form>
      		
      	<% } %>
      
      <% } %>
      <% if(aAction.type == "api") { %>
        &lt;script type="text/javascript" src='<a href="<%= basePath %><%= aAction.endpoint %>"><%= basePath %><%= aAction.endpoint %></a>'&gt; &lt;/script&gt;
      <% } %>
      <% if(aAction.type == "post") { %>
        <form method="post" action="<%= basePath %><%= aAction.endpoint %>" enctype="application/x-www-form-urlencoded">
            <% aAction.parameters.forEach(function(aParameter) { %>
              <b><%= aParameter.name %>: </b>
              <input type="textbox" size="64" name="<%= aParameter.name %>" value="<%= aParameter.value %>">
              <% if (aParameter.type == "select") { %>
              <br /><i><%= aParameter.name %> options: </i>
                 {
                 <% aParameter.values.forEach(function(aOption) { %>
                  "<%= aOption.id %>" (<%= aOption.title %>), 
                  <% }); %>
                  }
              <% } %>

              <% if (aParameter.type == "checkbox") { %>
              <br /><i><%= aParameter.name %> options: true, false</i>
              <% } %>

              <br />
            <% }); %>
            <input type="submit" name="submitform" value="submit">
        </form>
      <% } %>
    </fieldset>

    <% }); %>